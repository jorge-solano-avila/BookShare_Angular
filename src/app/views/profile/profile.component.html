<div>
	<div class = "row flex-items-xs-center">
		<h1>Perfil</h1>
	</div>

	<div class = "row flex-items-xs-center">
		<div class = "col-xs-4 offset-xs-1" [ngClass] = "{ 'custom-pointer': mode === 'edit' }" ng2FileDrop [uploader] = "uploader" (click) = "showInputFileDialog( fileInput )">
			<img class = "img-thumbnail custom-profile-image" [src] = "profileImage">
			<input class = "custom-display-none" #fileInput type = "file" ng2FileSelect [uploader] = "uploader" (change) = "updatePhoto()"/>
		</div>

		<div class = "col-xs-4 offset-xs-1">
			<form [formGroup] = "profileForm" (ngSubmit) = "save()">
				<h3>Datos personales</h3>

				<br>

				<div class = "form-group">
					<label>Nombre</label>
					<span *ngIf = "mode === 'view'">{{ user.name }}</span>
					<label *ngIf = "mode !== 'view'" class = "tooltip tooltip-validation tooltip-md tooltip-top-left" [class.invalid] = "( submitted || profileForm.controls.name.touched ) && profileForm.controls.name.invalid">
						<input type = "text" formControlName = "name" [(ngModel)] = "user.name">

						<span *ngIf = "profileForm.controls.name.errors" class = "tooltip-content">
							<div [hidden] = "!profileForm.controls.name.errors.required">
								El nombre es requerido
							</div>
						</span>
					</label>
				</div>

				<div class = "form-group">
					<label>Apellido</label>
					<span *ngIf = "mode === 'view'">{{ user.lastName }}</span>
					<label *ngIf = "mode !== 'view'" class = "tooltip tooltip-validation tooltip-md tooltip-top-left" [class.invalid] = "( submitted || profileForm.controls.lastName.touched ) && profileForm.controls.lastName.invalid">
						<input type = "text" formControlName = "lastName" [(ngModel)] = "user.lastName">

						<span *ngIf = "profileForm.controls.lastName.errors" class = "tooltip-content">
							<div [hidden] = "!profileForm.controls.lastName.errors.required">
								El apellido es requerido
							</div>
						</span>
					</label>
				</div>

				<div class = "form-group">
					<label>Correo electrónico</label>
					<span *ngIf = "mode === 'view'">{{ user.email }}</span>
					<label *ngIf = "mode !== 'view'" class = "tooltip tooltip-validation tooltip-md tooltip-top-left" [class.invalid] = "( submitted || profileForm.controls.email.touched ) && profileForm.controls.email.invalid">
						<input type = "text" formControlName = "email" [(ngModel)] = "user.email">

						<span *ngIf = "profileForm.controls.email.errors" class = "tooltip-content">
							<div [hidden] = "!profileForm.controls.email.errors.required">
								El correo electrónico es requerido
							</div>
							<div [hidden] = "!signUpForm.controls.email.errors.pattern">
								El correo electrónico no es válido
							</div>
							<div [hidden] = "!signUpForm.controls.email.errors.emailExists">
								El correo electrónico ya existe
							</div>
						</span>
					</label>
				</div>

				<div class = "form-group">
					<label>Ciudad</label>
					<span *ngIf = "mode === 'view'">{{ user.city.name }}</span>
					<label *ngIf = "mode !== 'view'" class = "tooltip tooltip-validation tooltip-md tooltip-top-left" [class.invalid] = "( submitted || profileForm.controls.city.touched ) && profileForm.controls.city.invalid">
						<input type = "text" formControlName = "city" [(ngModel)] = "user.city.name">

						<span *ngIf = "profileForm.controls.city.errors" class = "tooltip-content">
							<div [hidden] = "!profileForm.controls.city.errors.required">
								La ciudad es requerida
							</div>
						</span>
					</label>
				</div>
			</form>
		</div>
	</div>

	<div class = "row flex-items-xs-center">
		<div class = "col-xs-10 offset-xs-1">
			<h3>Intereses</h3>
			<div class = "custom-display-grid">
				<a *ngFor = "let interest of interests; let i = index" class = "card card-img" [ngClass] = "{ 'custom-item-selected': checkContainsInterest( interest ), 'clickable custom-pointer': mode !== 'view' }" (click) = "selectInterest( i )">
					<img [src] = "server + interest.photo.image.url">
					<div class = "custom-over">
						<div class = "custom-over-text">{{ interest.name }}</div>
					</div>
				</a>
			</div>
		</div>
	</div>
</div>